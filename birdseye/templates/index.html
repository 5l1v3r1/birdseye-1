{% extends "base.html" %}
{% block body %}

    {% from 'info_panel.html' import info_panel %}

    {% call info_panel() %}
        <p>Click on a file to view all the functions in that file (some of which may not be listed here).</p>
        <p>Click on a function/class name to view calls to that function.</p>
        <p>Click on the <i class="glyphicon glyphicon-play-circle"></i> icon
            to view the most recent call to that function.</p>
    {% endcall %}

    <ul class="no-bullet">
        {% for full, calls in files.items() %}
            <li>
                <a href="{{ url_for('file_view', path=full) }}">
                    <i class="glyphicon glyphicon-file"></i>
                    {{ short(full) }}
                </a>
                {% if calls %}
                    <ul class="no-bullet">
                        {% for (func_name, row) in calls.items() %}
                            <li>
                                <a href="{{ url_for('call_view', call_id=row.id) }}">
                                    <i class="glyphicon glyphicon-play-circle"></i>
                                </a>
                                <a href="{{ url_for('func_view', path=full, func_name=func_name) }}">
                                    {% if row.type == 'function' %}
                                        {{ func_name }}
                                    {% elif row.type == 'class' %}
                                        class {{ func_name }}
                                    {% else %}
                                        Execution of module
                                    {% endif %}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endblock %}